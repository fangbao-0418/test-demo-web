<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>处理保留小数</title>
    <style>
        .num{
            width: 200px;
            height: 100px;
            line-height: 100px;
            background: blanchedalmond;
            font-size: 28px;
            color: #666;
            text-align: center;
        }
    </style>
</head>
<body>
<div class="num"></div>
</body>
</html>
<script>
    //需求:保留两位小数 向下取整 如果返回是整数就保留一位小数0 返回一位小数就保留一位小数 返回两位小数就保留两位
    //分析 需要先判断返回的是整数还是浮点数
    var oDiv = document.getElementsByClassName('num');
    console.log(oDiv);
    /*var val = 1.25;
    val = parseFloat(val);
    //取整判断和原来是否相等  相等是整数 不相等是带有小数的
    if(parseInt(val) == val){
        //相等的时候 即返回是整数 需要在小数点后面补一个.0
        val = val + ".0";
    }else{
        //不相等 即返回是小数 需要判断返回是一位小数 还是两位小数-->一位小数不管 两位需要向下取整
        //split把一个字符串分割成字符串数组
        //1.判断有几位小数
        val = val + "";
        var res = val.split(".");
        console.log(res);//["整数部分","小数部分"]
        var len = res[1].length;
        console.log(len);
        //2.通过判断位数进行处理
        if(len == 1){
            console.log(val);//不能直接写return原因 可能不是一个函数不能直接返回 没地方接收
        }else{
            //两位及以上保留两位
            //substring 截取字符串
            //indexOf 返回字符串值在字符串中首次出现的位置
            /!*var index = val.indexOf(".");
            console.log(index);//3
            var sub = val.substring(0,6);//从索引0到索引6(包前不包后)
            console.log(sub);//100.99*!/
            val = val.substring(0,val.indexOf(".") + 3);
            console.log(val);
        }
    }*/

    //需求2 返回强制保留两位小数 四舍五入 不够补0
    /*var val = 125.5;
    val = val.toFixed(2);*/

    //需求3 强制保留两位小数 不能四舍五入 直接取
    /*var val = 0.6985;
    val = val + "" ;
    val = val.substring(0,val.indexOf(".") + 3);
    val = parseFloat(val).toFixed(2);*/

    //4.对需求1进行封装
    function handleNum(val) {
        if(!val) return;//首先进行空值判断
        if(parseInt(val) == val){
            val = val + ".0";
            return val
        };
        val = val + "";
        var res = val.split(".");
        if(res[1].length == 1) return val;
        val = val.substring(0,val.indexOf(".") + 3);
        return val;
    }
    console.log(handleNum(0.05));
    console.log(handleNum(0.005));
    console.log(handleNum(1));
    console.log(handleNum(1.6));
    console.log(handleNum(1.02));
    console.log(handleNum(1.59));
    console.log(handleNum(1.5993));

   // oDiv[0].innerHTML= val;
</script>